$(function(){  
     
       var pageURL = $(location).attr("href").split("/");

       if (pageURL[3] == "signup")
       {
       	 var url = "@{RegisterVerifyUserR}";
         var stringToCheck = "User exists";
       }
       else if (pageURL[3] == "login")
       {
	 var url = "@{LoginVerifyUserR}";
         var stringToCheck = "Invalid Username";
       }

       $("#submit").click(function(event){
                       
             var pwd = $("#password").val();
             var uname = $("#ident").val();

             if(pwd.length == 0)
             {             
                 $("#password").focus();                     
                 event.preventDefault();
             }  

             if(uname.length == 0)
             {             
                 $("#ident").focus();                     
                 event.preventDefault();
             }          

       });
       
       $("#ident").blur(function(){                
		var uname = $("#ident").val();
                
                if(uname.length > 0)
                {
			$.ajax({
				url: url,
				type: "PUT",
				contentType: "application/json",                   			
				data: JSON.stringify({ident:uname, password:""}), 
				success: function(result){
				      var data = result;
                                      if(data == stringToCheck)
                                      {
                                        $("#vu").hide();
 					$("#ivu").show();                                        
                                      }
                                      else
                                      {
                                        $("#ivu").hide();
					$("#vu").show();
                                      }        
				},
				error: function(xhr, status, error) {
				   alert(xhr.responseText);
				},
				dataType : "text"
			});
                }
                else
                {
		    $("#ivu").hide();
		    $("#vu").hide();	
                }

       });    
});


  

